"use strict";(globalThis.webpackChunkairpath_docs=globalThis.webpackChunkairpath_docs||[]).push([[5284],{7597:(e,i,r)=>{r.r(i),r.d(i,{assets:()=>t,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"api-reference/grid-utilities","title":"Grid Utilities","description":"This page documents the grid-related utilities for advanced users who need direct control over coordinate conversion and boundary handling. Most users won\'t need these \u2014 PathfindingService handles grid operations internally.","source":"@site/docs/api-reference/grid-utilities.md","sourceDirName":"api-reference","slug":"/api-reference/grid-utilities","permalink":"/airpath-docs/docs/api-reference/grid-utilities","draft":false,"unlisted":false,"editUrl":"https://github.com/maybebool/airpath-docs/tree/main/docs/api-reference/grid-utilities.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"Events","permalink":"/airpath-docs/docs/api-reference/events"},"next":{"title":"Advanced","permalink":"/airpath-docs/docs/category/advanced"}}');var d=r(4848),s=r(8453);const l={sidebar_position:5},o="Grid Utilities",t={},a=[{value:"Namespace",id:"namespace",level:2},{value:"GridConfiguration",id:"gridconfiguration",level:2},{value:"Definition",id:"definition",level:3},{value:"Properties",id:"properties",level:3},{value:"Constructor",id:"constructor",level:3},{value:"Example",id:"example",level:3},{value:"GridBoundaryHandler",id:"gridboundaryhandler",level:2},{value:"Getting the Handler",id:"getting-the-handler",level:3},{value:"Methods",id:"methods",level:3},{value:"ClampToValidGrid",id:"clamptovalidgrid",level:4},{value:"IsValidGridPosition",id:"isvalidgridposition",level:4},{value:"WorldToGridPositionClamped",id:"worldtogridpositionclamped",level:4},{value:"WorldToGridPositionUnclamped",id:"worldtogridpositionunclamped",level:4},{value:"GetNearestValidGridPosition",id:"getnearestvalidgridposition",level:4},{value:"DistanceToNearestBoundary",id:"distancetonearestboundary",level:4},{value:"GetBoundaryInfo",id:"getboundaryinfo",level:4},{value:"Internal Classes",id:"internal-classes",level:2},{value:"See Also",id:"see-also",level:2}];function c(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.header,{children:(0,d.jsx)(i.h1,{id:"grid-utilities",children:"Grid Utilities"})}),"\n",(0,d.jsxs)(i.p,{children:["This page documents the grid-related utilities for advanced users who need direct control over coordinate conversion and boundary handling. Most users won't need these \u2014 ",(0,d.jsx)(i.code,{children:"PathfindingService"})," handles grid operations internally."]}),"\n",(0,d.jsx)(i.h2,{id:"namespace",children:"Namespace"}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:"PlatypusIdeas.AirPath.Runtime.Core.Grid\n"})}),"\n",(0,d.jsx)(i.h2,{id:"gridconfiguration",children:"GridConfiguration"}),"\n",(0,d.jsx)(i.p,{children:"A Burst-compatible struct that holds all parameters needed to initialize a pathfinding grid."}),"\n",(0,d.jsx)(i.h3,{id:"definition",children:"Definition"}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:"public struct GridConfiguration\r\n{\r\n    public readonly int Width;\r\n    public readonly int Height;\r\n    public readonly float CellSize;\r\n    public float3 Origin;\r\n    public readonly float FlyCostMultiplier;\r\n    \r\n    public readonly int TotalNodes { get; }\r\n    public readonly bool IsValid { get; }\r\n}\n"})}),"\n",(0,d.jsx)(i.h3,{id:"properties",children:"Properties"}),"\n",(0,d.jsxs)(i.table,{children:[(0,d.jsx)(i.thead,{children:(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.th,{children:"Property"}),(0,d.jsx)(i.th,{children:"Type"}),(0,d.jsx)(i.th,{children:"Description"})]})}),(0,d.jsxs)(i.tbody,{children:[(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"Width"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"int"})}),(0,d.jsx)(i.td,{children:"Number of cells along the X-axis"})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"Height"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"int"})}),(0,d.jsx)(i.td,{children:"Number of cells along the Z-axis"})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"CellSize"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"float"})}),(0,d.jsx)(i.td,{children:"Size of each cell in world units"})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"Origin"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"float3"})}),(0,d.jsx)(i.td,{children:"World position of grid corner (0,0)"})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"FlyCostMultiplier"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"float"})}),(0,d.jsx)(i.td,{children:"Cost multiplier for height-based pathfinding"})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"TotalNodes"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"int"})}),(0,d.jsxs)(i.td,{children:["Total cells in grid (",(0,d.jsx)(i.code,{children:"Width * Height"}),")"]})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"IsValid"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"bool"})}),(0,d.jsxs)(i.td,{children:[(0,d.jsx)(i.code,{children:"true"})," if Width, Height, and CellSize are positive"]})]})]})]}),"\n",(0,d.jsx)(i.h3,{id:"constructor",children:"Constructor"}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:"public GridConfiguration(int width, int height, float cellSize, float3 origin, float flyCostMultiplier)\n"})}),"\n",(0,d.jsx)(i.h3,{id:"example",children:"Example"}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:'using PlatypusIdeas.AirPath.Runtime.Core.Grid;\r\nusing Unity.Mathematics;\r\n\r\n// Create configuration manually\r\nvar config = new GridConfiguration(\r\n    width: 64,\r\n    height: 64,\r\n    cellSize: 15.625f,\r\n    origin: new float3(0, 0, 0),\r\n    flyCostMultiplier: 2.5f\r\n);\r\n\r\n// Or derive from height provider\r\nvar config = new GridConfiguration(\r\n    width: heightProvider.GridWidth,\r\n    height: heightProvider.GridHeight,\r\n    cellSize: heightProvider.CellSize,\r\n    origin: heightProvider.Origin,\r\n    flyCostMultiplier: 2.5f\r\n);\r\n\r\n// Validate before use\r\nif (!config.IsValid)\r\n{\r\n    Debug.LogError("Invalid grid configuration!");\r\n    return;\r\n}\r\n\r\nDebug.Log($"Grid has {config.TotalNodes} cells");\n'})}),"\n",(0,d.jsx)(i.hr,{}),"\n",(0,d.jsx)(i.h2,{id:"gridboundaryhandler",children:"GridBoundaryHandler"}),"\n",(0,d.jsxs)(i.p,{children:["Utility class for coordinate conversion and boundary validation. Access it via ",(0,d.jsx)(i.code,{children:"PathfindingService.GetBoundaryHandler()"}),"."]}),"\n",(0,d.jsx)(i.h3,{id:"getting-the-handler",children:"Getting the Handler"}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:"var boundaryHandler = pathfindingService.GetBoundaryHandler();\n"})}),"\n",(0,d.jsx)(i.h3,{id:"methods",children:"Methods"}),"\n",(0,d.jsx)(i.h4,{id:"clamptovalidgrid",children:"ClampToValidGrid"}),"\n",(0,d.jsx)(i.p,{children:"Clamps a grid position to valid boundaries."}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:"public Vector2Int ClampToValidGrid(Vector2Int position)\r\npublic int2 ClampToValidGrid(int2 position)  // DOTS version\n"})}),"\n",(0,d.jsx)(i.p,{children:(0,d.jsx)(i.strong,{children:"Example:"})}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:"var rawPos = new Vector2Int(100, -5);  // Out of bounds\r\nvar validPos = boundaryHandler.ClampToValidGrid(rawPos);\r\n// validPos = (63, 0) for a 64x64 grid\n"})}),"\n",(0,d.jsx)(i.hr,{}),"\n",(0,d.jsx)(i.h4,{id:"isvalidgridposition",children:"IsValidGridPosition"}),"\n",(0,d.jsx)(i.p,{children:"Checks if a position is within grid boundaries."}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:"public bool IsValidGridPosition(Vector2Int position)\r\npublic bool IsValidGridPosition(int2 position)  // DOTS version\n"})}),"\n",(0,d.jsx)(i.p,{children:(0,d.jsx)(i.strong,{children:"Example:"})}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:"var pos = new Vector2Int(32, 32);\r\nif (boundaryHandler.IsValidGridPosition(pos))\r\n{\r\n    // Safe to use this position\r\n}\n"})}),"\n",(0,d.jsx)(i.hr,{}),"\n",(0,d.jsx)(i.h4,{id:"worldtogridpositionclamped",children:"WorldToGridPositionClamped"}),"\n",(0,d.jsx)(i.p,{children:"Converts world position to grid coordinates, clamping to valid bounds."}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:"public Vector2Int WorldToGridPositionClamped(Vector3 worldPos)\n"})}),"\n",(0,d.jsx)(i.p,{children:(0,d.jsx)(i.strong,{children:"Example:"})}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:"var worldPos = transform.position;\r\nvar gridPos = boundaryHandler.WorldToGridPositionClamped(worldPos);\r\n// Always returns a valid grid position\n"})}),"\n",(0,d.jsx)(i.hr,{}),"\n",(0,d.jsx)(i.h4,{id:"worldtogridpositionunclamped",children:"WorldToGridPositionUnclamped"}),"\n",(0,d.jsx)(i.p,{children:"Converts world position to grid coordinates without clamping. May return out-of-bounds values."}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:"public Vector2Int WorldToGridPositionUnclamped(Vector3 worldPos)\n"})}),"\n",(0,d.jsx)(i.p,{children:(0,d.jsx)(i.strong,{children:"Example:"})}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:"var gridPos = boundaryHandler.WorldToGridPositionUnclamped(worldPos);\r\n// May be negative or exceed grid bounds\n"})}),"\n",(0,d.jsx)(i.hr,{}),"\n",(0,d.jsx)(i.h4,{id:"getnearestvalidgridposition",children:"GetNearestValidGridPosition"}),"\n",(0,d.jsx)(i.p,{children:"Converts world position to grid coordinates and reports whether clamping occurred."}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:"public (Vector2Int gridPos, bool wasOutOfBounds) GetNearestValidGridPosition(Vector3 worldPos)\n"})}),"\n",(0,d.jsx)(i.p,{children:(0,d.jsx)(i.strong,{children:"Example:"})}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:'var (gridPos, wasOutOfBounds) = boundaryHandler.GetNearestValidGridPosition(target.position);\r\n\r\nif (wasOutOfBounds)\r\n{\r\n    Debug.LogWarning($"Target is outside grid, clamped to {gridPos}");\r\n}\n'})}),"\n",(0,d.jsx)(i.hr,{}),"\n",(0,d.jsx)(i.h4,{id:"distancetonearestboundary",children:"DistanceToNearestBoundary"}),"\n",(0,d.jsx)(i.p,{children:"Calculates how many cells a position is from the nearest grid edge."}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:"public float DistanceToNearestBoundary(Vector2Int position)\n"})}),"\n",(0,d.jsx)(i.p,{children:(0,d.jsx)(i.strong,{children:"Example:"})}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:'var distance = boundaryHandler.DistanceToNearestBoundary(agentGridPos);\r\n\r\nif (distance < 5)\r\n{\r\n    Debug.Log("Agent is near grid edge");\r\n}\n'})}),"\n",(0,d.jsx)(i.hr,{}),"\n",(0,d.jsx)(i.h4,{id:"getboundaryinfo",children:"GetBoundaryInfo"}),"\n",(0,d.jsx)(i.p,{children:"Returns a debug string describing grid bounds."}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:"public string GetBoundaryInfo()\n"})}),"\n",(0,d.jsx)(i.p,{children:(0,d.jsx)(i.strong,{children:"Example:"})}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:'Debug.Log(boundaryHandler.GetBoundaryInfo());\r\n// Output: "Grid Boundaries: (0,0) to (63,63)"\r\n\r\n### Conversion Formulas\r\n\r\n**World \u2192 Grid:**\r\n```csharp\r\ngridX = Floor((worldPos.x - origin.x) / cellSize)\r\ngridY = Floor((worldPos.z - origin.z) / cellSize)\n'})}),"\n",(0,d.jsx)(i.p,{children:(0,d.jsx)(i.strong,{children:"Grid \u2192 World (cell center):"})}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-csharp",children:"worldX = origin.x + (gridX + 0.5) * cellSize\r\nworldY = heightOffset  // or terrain height\r\nworldZ = origin.z + (gridY + 0.5) * cellSize\n"})}),"\n",(0,d.jsx)(i.h2,{id:"internal-classes",children:"Internal Classes"}),"\n",(0,d.jsx)(i.p,{children:"These classes are used internally and not intended for direct use:"}),"\n",(0,d.jsxs)(i.table,{children:[(0,d.jsx)(i.thead,{children:(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.th,{children:"Class"}),(0,d.jsx)(i.th,{children:"Purpose"})]})}),(0,d.jsxs)(i.tbody,{children:[(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"PathGridData"})}),(0,d.jsx)(i.td,{children:"NativeArray-based grid storage for Burst jobs"})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"PathNodeComponent"})}),(0,d.jsx)(i.td,{children:"Per-node pathfinding state"})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"PathNodeCost"})}),(0,d.jsx)(i.td,{children:"Per-node cost data (G, H, F costs)"})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"PathGridAuthoring"})}),(0,d.jsx)(i.td,{children:"ECS authoring component"})]})]})]}),"\n",(0,d.jsx)(i.h2,{id:"see-also",children:"See Also"}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.a,{href:"./pathfinding-service",children:"PathfindingService"})," \u2014 Main pathfinding API"]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.a,{href:"./height-provider-interface",children:"IHeightProvider"})," \u2014 Height data source"]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.a,{href:"../core-concepts/grid-system",children:"Core Concepts: Grid System"})," \u2014 Conceptual overview"]}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,d.jsx)(i,{...e,children:(0,d.jsx)(c,{...e})}):c(e)}},8453:(e,i,r)=>{r.d(i,{R:()=>l,x:()=>o});var n=r(6540);const d={},s=n.createContext(d);function l(e){const i=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:l(e.components),n.createElement(s.Provider,{value:i},e.children)}}}]);