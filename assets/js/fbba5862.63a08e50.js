"use strict";(globalThis.webpackChunkairpath_docs=globalThis.webpackChunkairpath_docs||[]).push([[2907],{8453:(e,i,r)=>{r.d(i,{R:()=>l,x:()=>d});var n=r(6540);const t={},s=n.createContext(t);function l(e){const i=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),n.createElement(s.Provider,{value:i},e.children)}},9183:(e,i,r)=>{r.r(i),r.d(i,{assets:()=>a,contentTitle:()=>d,default:()=>c,frontMatter:()=>l,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"api-reference/height-provider-interface","title":"IHeightProvider Interface","description":"The IHeightProvider interface allows AirPath to work with any height data source \u2014 not just Unity Terrain. Implement this interface to integrate AirPath with custom terrain systems, procedural generation, mesh-based landscapes, or voxel worlds.","source":"@site/docs/api-reference/height-provider-interface.md","sourceDirName":"api-reference","slug":"/api-reference/height-provider-interface","permalink":"/airpath-docs/docs/api-reference/height-provider-interface","draft":false,"unlisted":false,"editUrl":"https://github.com/maybebool/airpath-docs/tree/main/docs/api-reference/height-provider-interface.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"PathfindingService","permalink":"/airpath-docs/docs/api-reference/pathfinding-service"},"next":{"title":"Events","permalink":"/airpath-docs/docs/api-reference/events"}}');var t=r(4848),s=r(8453);const l={sidebar_position:2},d="IHeightProvider Interface",a={},h=[{value:"Namespace",id:"namespace",level:2},{value:"Interface Definition",id:"interface-definition",level:2},{value:"Properties",id:"properties",level:2},{value:"CellSize",id:"cellsize",level:3},{value:"Origin",id:"origin",level:3},{value:"GridWidth",id:"gridwidth",level:3},{value:"GridHeight",id:"gridheight",level:3},{value:"Methods",id:"methods",level:2},{value:"GetHeightAt",id:"getheightat",level:3},{value:"SampleHeights",id:"sampleheights",level:3},{value:"Built-in Implementation",id:"built-in-implementation",level:2},{value:"Custom Implementation Example",id:"custom-implementation-example",level:2},{value:"Implementation Guidelines",id:"implementation-guidelines",level:2},{value:"Performance",id:"performance",level:3},{value:"Coordinate System",id:"coordinate-system",level:3},{value:"Integration",id:"integration",level:3},{value:"Use Cases",id:"use-cases",level:2},{value:"See Also",id:"see-also",level:2}];function o(e){const i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"iheightprovider-interface",children:"IHeightProvider Interface"})}),"\n",(0,t.jsxs)(i.p,{children:["The ",(0,t.jsx)(i.code,{children:"IHeightProvider"})," interface allows AirPath to work with any height data source \u2014 not just Unity Terrain. Implement this interface to integrate AirPath with custom terrain systems, procedural generation, mesh-based landscapes, or voxel worlds."]}),"\n",(0,t.jsx)(i.h2,{id:"namespace",children:"Namespace"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-csharp",children:"PlatypusIdeas.AirPath.Runtime.Core.Terrain\n"})}),"\n",(0,t.jsx)(i.h2,{id:"interface-definition",children:"Interface Definition"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-csharp",children:"public interface IHeightProvider\r\n{\r\n    float GetHeightAt(int x, int y);\r\n    float[,] SampleHeights(int samplesPerDimension);\r\n    float CellSize { get; }\r\n    Vector3 Origin { get; }\r\n    int GridWidth { get; }\r\n    int GridHeight { get; }\r\n}\n"})}),"\n",(0,t.jsx)(i.h2,{id:"properties",children:"Properties"}),"\n",(0,t.jsx)(i.h3,{id:"cellsize",children:"CellSize"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-csharp",children:"float CellSize { get; }\n"})}),"\n",(0,t.jsx)(i.p,{children:"Size of each grid cell in world units."}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Example:"})," If your terrain is 100 units wide and the grid is 64 cells, ",(0,t.jsx)(i.code,{children:"CellSize = 100 / 64 = 1.5625"})]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h3,{id:"origin",children:"Origin"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-csharp",children:"Vector3 Origin { get; }\n"})}),"\n",(0,t.jsxs)(i.p,{children:["Origin point of the grid in world space \u2014 typically the bottom-left corner. This is where grid position ",(0,t.jsx)(i.code,{children:"(0, 0)"})," maps to in the world."]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h3,{id:"gridwidth",children:"GridWidth"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-csharp",children:"int GridWidth { get; }\n"})}),"\n",(0,t.jsx)(i.p,{children:"Width of the grid in cells. Used for bounds checking."}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Example:"})," For a 64\xd764 grid, ",(0,t.jsx)(i.code,{children:"GridWidth = 64"})]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h3,{id:"gridheight",children:"GridHeight"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-csharp",children:"int GridHeight { get; }\n"})}),"\n",(0,t.jsx)(i.p,{children:"Height of the grid in cells. Used for bounds checking."}),"\n",(0,t.jsx)(i.admonition,{type:"note",children:(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.code,{children:"GridHeight"}),' refers to the grid\'s Z-axis dimension in world space, not the Y-axis (elevation). The naming follows 2D grid conventions where "height" means the second dimension.']})}),"\n",(0,t.jsx)(i.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(i.h3,{id:"getheightat",children:"GetHeightAt"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-csharp",children:"float GetHeightAt(int x, int y);\n"})}),"\n",(0,t.jsx)(i.p,{children:"Gets the terrain height at a specific grid position."}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"Parameter"}),(0,t.jsx)(i.th,{children:"Type"}),(0,t.jsx)(i.th,{children:"Description"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"x"})}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"int"})}),(0,t.jsx)(i.td,{children:"Grid X coordinate (0 to GridWidth - 1)"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"y"})}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"int"})}),(0,t.jsx)(i.td,{children:"Grid Y coordinate (0 to GridHeight - 1) \u2014 this is grid space, not world Y"})]})]})]}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Returns:"})," Height in world units (Unity's Y-axis)"]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h3,{id:"sampleheights",children:"SampleHeights"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-csharp",children:"float[,] SampleHeights(int samplesPerDimension);\n"})}),"\n",(0,t.jsxs)(i.p,{children:["Samples heights for the entire grid at once. This is called once during initialization and is more efficient than calling ",(0,t.jsx)(i.code,{children:"GetHeightAt()"})," repeatedly."]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"Parameter"}),(0,t.jsx)(i.th,{children:"Type"}),(0,t.jsx)(i.th,{children:"Description"})]})}),(0,t.jsx)(i.tbody,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"samplesPerDimension"})}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"int"})}),(0,t.jsx)(i.td,{children:"Number of samples per dimension (e.g., 64 creates a 64\xd764 grid)"})]})})]}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Returns:"})," 2D array of height values ",(0,t.jsx)(i.code,{children:"[x, y]"})," in world units"]}),"\n",(0,t.jsx)(i.h2,{id:"built-in-implementation",children:"Built-in Implementation"}),"\n",(0,t.jsxs)(i.p,{children:["AirPath includes ",(0,t.jsx)(i.code,{children:"TerrainHeightProvider"})," for Unity Terrain. See ",(0,t.jsx)(i.a,{href:"../setup-guide/terrain-setup",children:"Custom Minimal Setup"})," for usage."]}),"\n",(0,t.jsx)(i.h2,{id:"custom-implementation-example",children:"Custom Implementation Example"}),"\n",(0,t.jsxs)(i.p,{children:["Here's a complete example implementing ",(0,t.jsx)(i.code,{children:"IHeightProvider"})," for a Perlin noise heightmap:"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-csharp",children:'using PlatypusIdeas.AirPath.Runtime.Core.Terrain;\r\nusing UnityEngine;\r\n\r\npublic class PerlinHeightProvider : MonoBehaviour, IHeightProvider\r\n{\r\n    [Header("Grid Settings")]\r\n    [SerializeField] private int gridSize = 64;\r\n    [SerializeField] private float terrainSize = 100f;\r\n    \r\n    [Header("Noise Settings")]\r\n    [SerializeField] private float noiseScale = 20f;\r\n    [SerializeField] private float heightMultiplier = 50f;\r\n    [SerializeField] private Vector2 noiseOffset;\r\n    \r\n    private float[,] _cachedHeights;\r\n    private bool _isCached;\r\n    \r\n    // IHeightProvider Properties\r\n    public float CellSize => terrainSize / gridSize;\r\n    public Vector3 Origin => transform.position;\r\n    public int GridWidth => gridSize;\r\n    public int GridHeight => gridSize;\r\n    \r\n    public float GetHeightAt(int x, int y)\r\n    {\r\n        // Bounds check\r\n        if (x < 0 || x >= gridSize || y < 0 || y >= gridSize)\r\n        {\r\n            Debug.LogWarning($"Position ({x},{y}) out of bounds");\r\n            return 0f;\r\n        }\r\n        \r\n        // Use cached data if available\r\n        if (_isCached)\r\n        {\r\n            return _cachedHeights[x, y];\r\n        }\r\n        \r\n        // Calculate height from Perlin noise\r\n        return CalculateHeight(x, y);\r\n    }\r\n    \r\n    public float[,] SampleHeights(int samplesPerDimension)\r\n    {\r\n        var heights = new float[samplesPerDimension, samplesPerDimension];\r\n        \r\n        for (int y = 0; y < samplesPerDimension; y++)\r\n        {\r\n            for (int x = 0; x < samplesPerDimension; x++)\r\n            {\r\n                heights[x, y] = CalculateHeight(x, y);\r\n            }\r\n        }\r\n        \r\n        // Cache the results\r\n        _cachedHeights = heights;\r\n        _isCached = true;\r\n        \r\n        return heights;\r\n    }\r\n    \r\n    private float CalculateHeight(int x, int y)\r\n    {\r\n        float sampleX = (x / (float)gridSize * noiseScale) + noiseOffset.x;\r\n        float sampleY = (y / (float)gridSize * noiseScale) + noiseOffset.y;\r\n        \r\n        float noise = Mathf.PerlinNoise(sampleX, sampleY);\r\n        return noise * heightMultiplier;\r\n    }\r\n    \r\n    /// <summary>\r\n    /// Call this if your terrain changes at runtime\r\n    /// </summary>\r\n    public void InvalidateCache()\r\n    {\r\n        _isCached = false;\r\n        _cachedHeights = null;\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(i.h2,{id:"implementation-guidelines",children:"Implementation Guidelines"}),"\n",(0,t.jsx)(i.h3,{id:"performance",children:"Performance"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Cache heights"})," \u2014 ",(0,t.jsx)(i.code,{children:"SampleHeights()"})," is called once at initialization. Cache the results for ",(0,t.jsx)(i.code,{children:"GetHeightAt()"})," calls."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Bounds checking"})," \u2014 Validate grid coordinates before accessing data."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Thread safety"})," \u2014 ",(0,t.jsx)(i.code,{children:"GetHeightAt()"})," may be called from jobs. Avoid modifying shared state."]}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"coordinate-system",children:"Coordinate System"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{children:"World Space:           Grid Space:\r\n    Y (up)                 \r\n    \u2502                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba X (GridWidth)\r\n    \u2502                    \u2502\r\n    \u2502                    \u2502\r\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba X         \u2502\r\n   /                     \u25bc\r\n  Z                      Y (GridHeight)\r\nOrigin                 (0,0)\n"})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Grid ",(0,t.jsx)(i.code,{children:"(0, 0)"})," corresponds to ",(0,t.jsx)(i.code,{children:"Origin"})," in world space"]}),"\n",(0,t.jsxs)(i.li,{children:["Grid ",(0,t.jsx)(i.code,{children:"x"})," maps to world X-axis"]}),"\n",(0,t.jsxs)(i.li,{children:["Grid ",(0,t.jsx)(i.code,{children:"y"})," maps to world Z-axis"]}),"\n",(0,t.jsx)(i.li,{children:"Height values are world Y-axis"}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"integration",children:"Integration"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:["Create a MonoBehaviour implementing ",(0,t.jsx)(i.code,{children:"IHeightProvider"})]}),"\n",(0,t.jsx)(i.li,{children:"Attach it to a GameObject in your scene"}),"\n",(0,t.jsxs)(i.li,{children:["Reference it in ",(0,t.jsx)(i.code,{children:"PathfindingManager"}),"'s ",(0,t.jsx)(i.strong,{children:"Height Provider"})," field"]}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-csharp",children:'// In PathfindingManager or your initialization code\r\n[SerializeField] private MonoBehaviour heightProviderComponent;\r\n\r\nvoid Start()\r\n{\r\n    var heightProvider = heightProviderComponent as IHeightProvider;\r\n    if (heightProvider == null)\r\n    {\r\n        Debug.LogError("Height provider must implement IHeightProvider!");\r\n        return;\r\n    }\r\n    \r\n    // Use with PathfindingService\r\n    var config = new GridConfiguration(\r\n        heightProvider.GridWidth,\r\n        heightProvider.GridHeight,\r\n        heightProvider.CellSize,\r\n        heightProvider.Origin,\r\n        flyCostMultiplier: 2.5f\r\n    );\r\n    \r\n    pathfindingService.Initialize(config, heightProvider);\r\n}\n'})}),"\n",(0,t.jsx)(i.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"Scenario"}),(0,t.jsx)(i.th,{children:"Implementation Approach"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.strong,{children:"Unity Terrain"})}),(0,t.jsxs)(i.td,{children:["Use built-in ",(0,t.jsx)(i.code,{children:"TerrainHeightProvider"})]})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.strong,{children:"Procedural terrain"})}),(0,t.jsx)(i.td,{children:"Sample from noise function (see example above)"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.strong,{children:"Heightmap texture"})}),(0,t.jsx)(i.td,{children:"Read pixel values from Texture2D"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.strong,{children:"Mesh terrain"})}),(0,t.jsx)(i.td,{children:"Raycast down or read vertex heights"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.strong,{children:"Voxel world"})}),(0,t.jsx)(i.td,{children:"Query voxel data for surface height"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.strong,{children:"Flat plane"})}),(0,t.jsx)(i.td,{children:"Return constant height value"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.strong,{children:"Water surface"})}),(0,t.jsx)(i.td,{children:"Return water level, optionally with waves"})]})]})]}),"\n",(0,t.jsx)(i.h2,{id:"see-also",children:"See Also"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.a,{href:"../core-concepts/grid-system",children:"Grid System"})," \u2014 How the pathfinding grid works"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.a,{href:"./pathfinding-service",children:"PathfindingService"})," \u2014 How to initialize pathfinding with a height provider"]}),"\n"]})]})}function c(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);