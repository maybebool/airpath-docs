"use strict";(globalThis.webpackChunkairpath_docs=globalThis.webpackChunkairpath_docs||[]).push([[2583],{8453:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>c});var i=r(6540);const t={},s=i.createContext(t);function d(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),i.createElement(s.Provider,{value:n},e.children)}},9291:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>o,frontMatter:()=>d,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"api-reference/events","title":"Events","description":"AirPath uses an event-driven architecture for communication between components. This allows loose coupling \u2014 components don\'t need direct references to each other.","source":"@site/docs/api-reference/events.md","sourceDirName":"api-reference","slug":"/api-reference/events","permalink":"/airpath-docs/docs/api-reference/events","draft":false,"unlisted":false,"editUrl":"https://github.com/maybebool/airpath-docs/tree/main/docs/api-reference/events.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"IHeightProvider Interface","permalink":"/airpath-docs/docs/api-reference/height-provider-interface"},"next":{"title":"Grid Utilities","permalink":"/airpath-docs/docs/api-reference/grid-utilities"}}');var t=r(4848),s=r(8453);const d={sidebar_position:4},c="Events",l={},a=[{value:"Namespace",id:"namespace",level:2},{value:"Event Bus Overview",id:"event-bus-overview",level:2},{value:"Setup",id:"setup",level:3},{value:"Subscribing to Events",id:"subscribing-to-events",level:2},{value:"Using Extension Methods (Recommended)",id:"using-extension-methods-recommended",level:3},{value:"Using the Event Bus Directly",id:"using-the-event-bus-directly",level:3},{value:"Priority Subscriptions",id:"priority-subscriptions",level:3},{value:"Publishing Events",id:"publishing-events",level:2},{value:"Event Reference",id:"event-reference",level:2},{value:"PathRequestedEvent",id:"pathrequestedevent",level:3},{value:"PathCalculatedEvent",id:"pathcalculatedevent",level:3},{value:"PathfindingModeChangedEvent",id:"pathfindingmodechangedevent",level:3},{value:"BoundaryViolationEvent",id:"boundaryviolationevent",level:3},{value:"SwarmUpdateEvent",id:"swarmupdateevent",level:3},{value:"VisualizationUpdateEvent",id:"visualizationupdateevent",level:3},{value:"ConfigurationChangedEvent",id:"configurationchangedevent",level:3},{value:"PathfindingErrorEvent",id:"pathfindingerrorevent",level:3},{value:"Event Bus Configuration",id:"event-bus-configuration",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Always Unsubscribe",id:"always-unsubscribe",level:3},{value:"Check HasInstance",id:"check-hasinstance",level:3},{value:"Use Sender for Filtering",id:"use-sender-for-filtering",level:3},{value:"Debug with Event Logging",id:"debug-with-event-logging",level:3},{value:"See Also",id:"see-also",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"events",children:"Events"})}),"\n",(0,t.jsx)(n.p,{children:"AirPath uses an event-driven architecture for communication between components. This allows loose coupling \u2014 components don't need direct references to each other."}),"\n",(0,t.jsx)(n.h2,{id:"namespace",children:"Namespace"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"PlatypusIdeas.AirPath.Runtime.Events\n"})}),"\n",(0,t.jsx)(n.h2,{id:"event-bus-overview",children:"Event Bus Overview"}),"\n",(0,t.jsx)(n.p,{children:"The event system consists of three parts:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"PathfindingEventBus"})," \u2014 A ScriptableObject asset that manages subscriptions and event delivery"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"EventBusUpdateHandler"})," \u2014 A MonoBehaviour that processes the event queue each frame"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Event Classes"})," \u2014 Data objects representing different events"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"setup",children:"Setup"}),"\n",(0,t.jsx)(n.p,{children:"The event bus must be set up before use:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Create the asset: ",(0,t.jsx)(n.strong,{children:"Create \u2192 EventSystem \u2192 PathfindingEventBus"})]}),"\n",(0,t.jsxs)(n.li,{children:["Add ",(0,t.jsx)(n.code,{children:"EventBusUpdateHandler"})," to your scene"]}),"\n",(0,t.jsxs)(n.li,{children:["Assign the asset to the handler's ",(0,t.jsx)(n.strong,{children:"Event Bus Asset"})," field"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"../setup-guide/terrain-setup",children:"Custom Minimal Setup"})," for detailed instructions."]}),"\n",(0,t.jsx)(n.h2,{id:"subscribing-to-events",children:"Subscribing to Events"}),"\n",(0,t.jsx)(n.h3,{id:"using-extension-methods-recommended",children:"Using Extension Methods (Recommended)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'using PlatypusIdeas.AirPath.Runtime.Events;\r\nusing UnityEngine;\r\n\r\npublic class PathListener : MonoBehaviour\r\n{\r\n    private void Start()\r\n    {\r\n        // Subscribe using extension method\r\n        this.Subscribe<PathCalculatedEvent>(OnPathCalculated);\r\n    }\r\n    \r\n    private void OnDestroy()\r\n    {\r\n        // Always unsubscribe when destroyed\r\n        EventBusExtensions.Unsubscribe<PathCalculatedEvent>(OnPathCalculated);\r\n    }\r\n    \r\n    private void OnPathCalculated(PathCalculatedEvent evt)\r\n    {\r\n        if (evt.Success)\r\n        {\r\n            Debug.Log($"Path calculated with {evt.WorldPath.Count} waypoints");\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"using-the-event-bus-directly",children:"Using the Event Bus Directly"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"private void Start()\r\n{\r\n    if (PathfindingEventBus.HasInstance)\r\n    {\r\n        PathfindingEventBus.Instance.Subscribe<PathCalculatedEvent>(OnPathCalculated, this);\r\n    }\r\n}\r\n\r\nprivate void OnDestroy()\r\n{\r\n    if (PathfindingEventBus.HasInstance)\r\n    {\r\n        PathfindingEventBus.Instance.Unsubscribe<PathCalculatedEvent>(OnPathCalculated);\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"priority-subscriptions",children:"Priority Subscriptions"}),"\n",(0,t.jsx)(n.p,{children:"Higher priority handlers are called first:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// Called first (priority 10)\r\nthis.Subscribe<PathCalculatedEvent>(OnPathCalculatedHighPriority, priority: 10);\r\n\r\n// Called second (priority 0, default)\r\nthis.Subscribe<PathCalculatedEvent>(OnPathCalculatedNormal);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"publishing-events",children:"Publishing Events"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"using PlatypusIdeas.AirPath.Runtime.Events;\r\n\r\n// Using extension method\r\nEventBusExtensions.Publish(new PathCalculatedEvent(result, worldPath, this));\r\n\r\n// Using instance directly\r\nif (PathfindingEventBus.HasInstance)\r\n{\r\n    PathfindingEventBus.Instance.Publish(new PathCalculatedEvent(result, worldPath, this));\r\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"event-reference",children:"Event Reference"}),"\n",(0,t.jsxs)(n.p,{children:["All events inherit from ",(0,t.jsx)(n.code,{children:"PathfindingEventBase"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public abstract class PathfindingEventBase\r\n{\r\n    public float Timestamp { get; }    // Time.time when event was created\r\n    public object Sender { get; }      // Object that published the event\r\n}\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"pathrequestedevent",children:"PathRequestedEvent"}),"\n",(0,t.jsx)(n.p,{children:"Fired when a path calculation is requested."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public class PathRequestedEvent : PathfindingEventBase\r\n{\r\n    public PathRequest Request { get; }\r\n    public PathfindingModeType RequestingMode { get; }\r\n}\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Property"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Request"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"PathRequest"})}),(0,t.jsx)(n.td,{children:"Contains start/end positions, height offset, request ID"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RequestingMode"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"PathfindingModeType"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"MouseClick"})," or ",(0,t.jsx)(n.code,{children:"TargetFollow"})]})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'this.Subscribe<PathRequestedEvent>(evt =>\r\n{\r\n    Debug.Log($"Path requested from {evt.RequestingMode} mode");\r\n});\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"pathcalculatedevent",children:"PathCalculatedEvent"}),"\n",(0,t.jsx)(n.p,{children:"Fired when a path calculation completes (success or failure)."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public class PathCalculatedEvent : PathfindingEventBase\r\n{\r\n    public PathResult Result { get; }\r\n    public List<Vector3> WorldPath { get; }\r\n    public float CalculationTime { get; }\r\n    public bool Success { get; }\r\n}\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Property"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Result"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"PathResult"})}),(0,t.jsx)(n.td,{children:"Full result object with metadata"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"WorldPath"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"List<Vector3>"})}),(0,t.jsx)(n.td,{children:"Path waypoints in world space (null if failed)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"CalculationTime"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"float"})}),(0,t.jsx)(n.td,{children:"Time taken to calculate in milliseconds"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Success"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bool"})}),(0,t.jsx)(n.td,{children:"Whether a valid path was found"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'this.Subscribe<PathCalculatedEvent>(evt =>\r\n{\r\n    if (evt.Success)\r\n    {\r\n        Debug.Log($"Path found: {evt.WorldPath.Count} waypoints in {evt.CalculationTime}ms");\r\n        \r\n        // Use the path\r\n        foreach (var waypoint in evt.WorldPath)\r\n        {\r\n            // Process waypoints...\r\n        }\r\n    }\r\n    else\r\n    {\r\n        Debug.LogWarning("No path found!");\r\n    }\r\n});\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"pathfindingmodechangedevent",children:"PathfindingModeChangedEvent"}),"\n",(0,t.jsx)(n.p,{children:"Fired when switching between pathfinding modes."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public class PathfindingModeChangedEvent : PathfindingEventBase\r\n{\r\n    public PathfindingModeType PreviousMode { get; }\r\n    public PathfindingModeType NewMode { get; }\r\n    public IPathfindingMode ModeInstance { get; }\r\n}\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Property"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"PreviousMode"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"PathfindingModeType"})}),(0,t.jsx)(n.td,{children:"Mode before the change"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"NewMode"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"PathfindingModeType"})}),(0,t.jsx)(n.td,{children:"Mode after the change"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ModeInstance"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"IPathfindingMode"})}),(0,t.jsx)(n.td,{children:"Instance of the new mode"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'this.Subscribe<PathfindingModeChangedEvent>(evt =>\r\n{\r\n    Debug.Log($"Mode changed: {evt.PreviousMode} \u2192 {evt.NewMode}");\r\n    \r\n    // Update UI based on new mode\r\n    UpdateModeUI(evt.NewMode);\r\n});\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"boundaryviolationevent",children:"BoundaryViolationEvent"}),"\n",(0,t.jsx)(n.p,{children:"Fired when a position is outside the pathfinding grid bounds."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public class BoundaryViolationEvent : PathfindingEventBase\r\n{\r\n    public Vector2Int OriginalPosition { get; }\r\n    public Vector2Int ClampedPosition { get; }\r\n    public string ViolationType { get; }\r\n    public bool WasAutoClamped { get; }\r\n}\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Property"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"OriginalPosition"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Vector2Int"})}),(0,t.jsx)(n.td,{children:"The out-of-bounds position"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ClampedPosition"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Vector2Int"})}),(0,t.jsx)(n.td,{children:"Position after clamping to valid bounds"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ViolationType"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:"Description of the violation"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"WasAutoClamped"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bool"})}),(0,t.jsx)(n.td,{children:"Whether auto-clamping was applied"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'this.Subscribe<BoundaryViolationEvent>(evt =>\r\n{\r\n    if (!evt.WasAutoClamped)\r\n    {\r\n        Debug.LogError($"Position {evt.OriginalPosition} is out of bounds!");\r\n    }\r\n});\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"swarmupdateevent",children:"SwarmUpdateEvent"}),"\n",(0,t.jsx)(n.p,{children:"Fired for swarm-related updates."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public class SwarmUpdateEvent : PathfindingEventBase\r\n{\r\n    public UpdateType Type { get; }\r\n    public Vector3 Position { get; }\r\n    public int BirdCount { get; }\r\n    public object AdditionalData { get; }\r\n    \r\n    public enum UpdateType\r\n    {\r\n        BirdsSpawned,\r\n        BirdsStartedPath,\r\n        BirdReachedTarget,\r\n        AllBirdsReachedTarget,\r\n        SwarmPositionUpdated\r\n    }\r\n}\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Property"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Type"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"UpdateType"})}),(0,t.jsx)(n.td,{children:"Type of swarm update"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Position"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Vector3"})}),(0,t.jsx)(n.td,{children:"Relevant position (e.g., swarm center)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"BirdCount"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"int"})}),(0,t.jsx)(n.td,{children:"Number of agents involved"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AdditionalData"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"object"})}),(0,t.jsx)(n.td,{children:"Optional extra data"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'this.Subscribe<SwarmUpdateEvent>(evt =>\r\n{\r\n    switch (evt.Type)\r\n    {\r\n        case SwarmUpdateEvent.UpdateType.AllBirdsReachedTarget:\r\n            Debug.Log("All agents reached destination!");\r\n            break;\r\n            \r\n        case SwarmUpdateEvent.UpdateType.SwarmPositionUpdated:\r\n            UpdateSwarmUI(evt.Position);\r\n            break;\r\n    }\r\n});\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"visualizationupdateevent",children:"VisualizationUpdateEvent"}),"\n",(0,t.jsx)(n.p,{children:"Fired when visualization state changes."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public class VisualizationUpdateEvent : PathfindingEventBase\r\n{\r\n    public UpdateType Type { get; }\r\n    public object Data { get; }\r\n    \r\n    public enum UpdateType\r\n    {\r\n        PathLineUpdated,\r\n        MarkersUpdated,\r\n        GridCellsUpdated,\r\n        DebugVisualizationToggled,\r\n        VisualizationCleared\r\n    }\r\n}\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Property"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Type"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"UpdateType"})}),(0,t.jsx)(n.td,{children:"Type of visualization update"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Data"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"object"})}),(0,t.jsx)(n.td,{children:"Optional data related to the update"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"configurationchangedevent",children:"ConfigurationChangedEvent"}),"\n",(0,t.jsx)(n.p,{children:"Fired when a configuration ScriptableObject changes."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public class ConfigurationChangedEvent : PathfindingEventBase\r\n{\r\n    public ConfigurationBase Configuration { get; }\r\n    public string ConfigurationType { get; }\r\n    public bool RequiresRecalculation { get; }\r\n}\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Property"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Configuration"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ConfigurationBase"})}),(0,t.jsx)(n.td,{children:"The changed configuration asset"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ConfigurationType"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:'Type name (e.g., "PathfindingConfiguration")'})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RequiresRecalculation"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bool"})}),(0,t.jsx)(n.td,{children:"Whether pathfinding grid needs rebuild"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'this.Subscribe<ConfigurationChangedEvent>(evt =>\r\n{\r\n    if (evt.RequiresRecalculation)\r\n    {\r\n        Debug.Log($"{evt.ConfigurationType} changed - recalculating...");\r\n    }\r\n});\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"pathfindingerrorevent",children:"PathfindingErrorEvent"}),"\n",(0,t.jsx)(n.p,{children:"Base class for error events."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public abstract class PathfindingErrorEvent : PathfindingEventBase\r\n{\r\n    public string ErrorMessage { get; }\r\n    public Exception Exception { get; }\r\n    public bool IsCritical { get; }\r\n}\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Property"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ErrorMessage"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:"Human-readable error description"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Exception"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Exception"})}),(0,t.jsx)(n.td,{children:"The exception if one occurred"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"IsCritical"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bool"})}),(0,t.jsx)(n.td,{children:"Whether this error is critical"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"event-bus-configuration",children:"Event Bus Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"PathfindingEventBus"})," asset has these settings:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Setting"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Enable Event Logging"})}),(0,t.jsx)(n.td,{children:"false"}),(0,t.jsx)(n.td,{children:"Log all subscribe/publish operations"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Process Events Immediately"})}),(0,t.jsx)(n.td,{children:"true"}),(0,t.jsx)(n.td,{children:"Process events immediately vs. queued"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Max Events Per Frame"})}),(0,t.jsx)(n.td,{children:"10"}),(0,t.jsx)(n.td,{children:"Max queued events processed per frame"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"always-unsubscribe",children:"Always Unsubscribe"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"private void OnDestroy()\r\n{\r\n    // Prevents memory leaks and errors\r\n    EventBusExtensions.Unsubscribe<PathCalculatedEvent>(OnPathCalculated);\r\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"check-hasinstance",children:"Check HasInstance"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// Safe for scene transitions\r\nif (PathfindingEventBus.HasInstance)\r\n{\r\n    EventBusExtensions.Publish(myEvent);\r\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"use-sender-for-filtering",children:"Use Sender for Filtering"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"this.Subscribe<PathCalculatedEvent>(evt =>\r\n{\r\n    // Only handle events from a specific source\r\n    if (evt.Sender == myPathfindingManager)\r\n    {\r\n        ProcessPath(evt.WorldPath);\r\n    }\r\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"debug-with-event-logging",children:"Debug with Event Logging"}),"\n",(0,t.jsxs)(n.p,{children:["Enable ",(0,t.jsx)(n.strong,{children:"Event Logging"})," on the ",(0,t.jsx)(n.code,{children:"PathfindingEventBus"})," asset to see all event activity in the console."]}),"\n",(0,t.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"../setup-guide/terrain-setup",children:"Custom Minimal Setup"})," \u2014 Event bus setup"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"../setup-guide/pathfinding-manager",children:"PathfindingManager"})," \u2014 Main event publisher"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"../advanced/swarm-integration",children:"Swarm Integration"})," \u2014 Using swarm events"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}}}]);