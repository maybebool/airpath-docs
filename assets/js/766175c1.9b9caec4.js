"use strict";(globalThis.webpackChunkairpath_docs=globalThis.webpackChunkairpath_docs||[]).push([[5379],{2034:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/TerrainControllerInspector-6ae85ea3a477471daa2f8b4456dd4d28.jpg"},6760:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>c,frontMatter:()=>a,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"setup-guide/terrain-setup","title":"Custom Minimal Setup","description":"Get AirPath running in your scene in under 5 minutes. This guide covers the minimal setup required to calculate your first aerial path.","source":"@site/docs/setup-guide/terrain-setup.md","sourceDirName":"setup-guide","slug":"/setup-guide/terrain-setup","permalink":"/airpath-docs/docs/setup-guide/terrain-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/maybebool/airpath-docs/tree/main/docs/setup-guide/terrain-setup.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Setup Guide","permalink":"/airpath-docs/docs/category/setup-guide"},"next":{"title":"Visualization Setup","permalink":"/airpath-docs/docs/setup-guide/pathfinding-manager"}}');var t=i(4848),s=i(8453);const a={sidebar_position:1},l="Custom Minimal Setup",d={},o=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Create Configuration Assets",id:"step-1-create-configuration-assets",level:2},{value:"Pathfinding Configuration",id:"pathfinding-configuration",level:3},{value:"Step 2: Create the Event Bus Asset",id:"step-2-create-the-event-bus-asset",level:2},{value:"Step 3: Set Up the Scene",id:"step-3-set-up-the-scene",level:2},{value:"Add the Event Bus Handler",id:"add-the-event-bus-handler",level:3},{value:"Add the Height Provider",id:"add-the-height-provider",level:3},{value:"Add the Pathfinding Manager",id:"add-the-pathfinding-manager",level:3},{value:"Step 4: Test It",id:"step-4-test-it",level:2},{value:"Minimal Scene Hierarchy",id:"minimal-scene-hierarchy",level:2},{value:"Complete Minimal Setup Code",id:"complete-minimal-setup-code",level:2},{value:"About the Terrain Setup",id:"about-the-terrain-setup",level:2},{value:"TerrainController (Demo Only)",id:"terraincontroller-demo-only",level:3},{value:"TerrainHeightProvider (Required)",id:"terrainheightprovider-required",level:3},{value:"What&#39;s Next?",id:"whats-next",level:2},{value:"Troubleshooting Quick Start",id:"troubleshooting-quick-start",level:2},{value:"&quot;PathfindingEventBus instance not initialized&quot;",id:"pathfindingeventbus-instance-not-initialized",level:3},{value:"&quot;heightProvider cannot be null&quot;",id:"heightprovider-cannot-be-null",level:3},{value:"Path is always null",id:"path-is-always-null",level:3},{value:"Performance is slow",id:"performance-is-slow",level:3}];function h(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"custom-minimal-setup",children:"Custom Minimal Setup"})}),"\n",(0,t.jsx)(n.p,{children:"Get AirPath running in your scene in under 5 minutes. This guide covers the minimal setup required to calculate your first aerial path."}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["AirPath ",(0,t.jsx)(n.a,{href:"/airpath-docs/docs/getting-started/installation",children:"installed"})," in your project"]}),"\n",(0,t.jsx)(n.li,{children:"A scene with a Unity Terrain"}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{title:"No Terrain Yet?",type:"tip",children:(0,t.jsxs)(n.p,{children:["You can quickly create a terrain via ",(0,t.jsx)(n.strong,{children:"GameObject \u2192 3D Object \u2192 Terrain"}),". For testing, a flat terrain works fine \u2014 AirPath will still calculate paths."]})}),"\n",(0,t.jsx)(n.h2,{id:"step-1-create-configuration-assets",children:"Step 1: Create Configuration Assets"}),"\n",(0,t.jsx)(n.p,{children:"AirPath uses ScriptableObject assets for configuration. Let's create the required configs:"}),"\n",(0,t.jsx)(n.h3,{id:"pathfinding-configuration",children:"Pathfinding Configuration"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Right-click in your Project window"}),"\n",(0,t.jsxs)(n.li,{children:["Select ",(0,t.jsx)(n.strong,{children:"Create \u2192 Pathfinding \u2192 Configurations \u2192 Pathfinding Configuration"})]}),"\n",(0,t.jsxs)(n.li,{children:["Name it ",(0,t.jsx)(n.code,{children:"PathfindingConfig"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Leave the default values for now. Key settings you can adjust later:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Setting"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Samples Per Dimension"}),(0,t.jsx)(n.td,{children:"64"}),(0,t.jsx)(n.td,{children:"Grid resolution (64\xd764 = 4,096 cells)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Fly Cost Multiplier"}),(0,t.jsx)(n.td,{children:"2.5"}),(0,t.jsx)(n.td,{children:"How much to penalize high-altitude paths"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Auto Clamp Out Of Bounds"}),(0,t.jsx)(n.td,{children:"true"}),(0,t.jsx)(n.td,{children:"Automatically fix out-of-bounds positions"})]})]})]}),"\n","\n",(0,t.jsx)(n.h2,{id:"step-2-create-the-event-bus-asset",children:"Step 2: Create the Event Bus Asset"}),"\n",(0,t.jsx)(n.p,{children:"AirPath uses an event system for communication between components."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Right-click in your Project window"}),"\n",(0,t.jsxs)(n.li,{children:["Select ",(0,t.jsx)(n.strong,{children:"Create \u2192 EventSystem \u2192 PathfindingEventBus"})]}),"\n",(0,t.jsxs)(n.li,{children:["Name it ",(0,t.jsx)(n.code,{children:"PathfindingEventBus"})]}),"\n"]}),"\n","\n",(0,t.jsx)(n.h2,{id:"step-3-set-up-the-scene",children:"Step 3: Set Up the Scene"}),"\n",(0,t.jsx)(n.p,{children:"Now let's add the required components to your scene."}),"\n",(0,t.jsx)(n.h3,{id:"add-the-event-bus-handler",children:"Add the Event Bus Handler"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Create an empty GameObject: ",(0,t.jsx)(n.strong,{children:"GameObject \u2192 Create Empty"})]}),"\n",(0,t.jsxs)(n.li,{children:["Name it ",(0,t.jsx)(n.code,{children:"EventBusHandler"})]}),"\n",(0,t.jsxs)(n.li,{children:["Add the ",(0,t.jsx)(n.code,{children:"EventBusUpdateHandler"})," component"]}),"\n",(0,t.jsxs)(n.li,{children:["Assign your ",(0,t.jsx)(n.code,{children:"PathfindingEventBus"})," asset to the ",(0,t.jsx)(n.strong,{children:"Event Bus Asset"})," field"]}),"\n",(0,t.jsxs)(n.li,{children:["Enable ",(0,t.jsx)(n.strong,{children:"Persist Across Scenes"})," if you want it to survive scene loads"]}),"\n"]}),"\n","\n",(0,t.jsx)(n.h3,{id:"add-the-height-provider",children:"Add the Height Provider"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Select your ",(0,t.jsx)(n.strong,{children:"Terrain"})," GameObject"]}),"\n",(0,t.jsxs)(n.li,{children:["Add the ",(0,t.jsx)(n.code,{children:"TerrainHeightProvider"})," component"]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.strong,{children:"Terrain"})," field should auto-populate (it's a required component)"]}),"\n",(0,t.jsxs)(n.li,{children:["Assign your ",(0,t.jsx)(n.code,{children:"PathfindingConfig"})," asset to the ",(0,t.jsx)(n.strong,{children:"Pathfinding Config"})," field"]}),"\n"]}),"\n","\n",(0,t.jsx)(n.h3,{id:"add-the-pathfinding-manager",children:"Add the Pathfinding Manager"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Create an empty GameObject: ",(0,t.jsx)(n.strong,{children:"GameObject \u2192 Create Empty"})]}),"\n",(0,t.jsxs)(n.li,{children:["Name it ",(0,t.jsx)(n.code,{children:"PathfindingManager"})]}),"\n",(0,t.jsxs)(n.li,{children:["Add the ",(0,t.jsx)(n.code,{children:"PathfindingManager"})," component"]}),"\n",(0,t.jsxs)(n.li,{children:["Assign references:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Height Provider"}),": Your Terrain's ",(0,t.jsx)(n.code,{children:"TerrainHeightProvider"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Terrain Controller"}),": (Optional) For visualization features"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Set ",(0,t.jsx)(n.strong,{children:"Starting Mode"})," to ",(0,t.jsx)(n.code,{children:"MouseClick"})," for testing"]}),"\n"]}),"\n","\n",(0,t.jsx)(n.h2,{id:"step-4-test-it",children:"Step 4: Test It"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Press ",(0,t.jsx)(n.strong,{children:"Play"})]}),"\n",(0,t.jsxs)(n.li,{children:["Click on the terrain to set a ",(0,t.jsx)(n.strong,{children:"start point"})," (green marker appears)"]}),"\n",(0,t.jsxs)(n.li,{children:["Click again to set an ",(0,t.jsx)(n.strong,{children:"end point"})," and calculate the path"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"You should see:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Console logs showing path calculation time"}),"\n",(0,t.jsx)(n.li,{children:"The path calculated between your two points"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"[PathfindingService] Initialized with grid size 64x64, cell size: 15.625, flyCostMultiplier: 2.5\r\n[PathfindingService] Path found: 45 waypoints in 2ms\n"})}),"\n","\n",(0,t.jsx)(n.h2,{id:"minimal-scene-hierarchy",children:"Minimal Scene Hierarchy"}),"\n",(0,t.jsx)(n.p,{children:"Your scene hierarchy should look like this:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Scene\r\n\u251c\u2500\u2500 EventBusHandler          (EventBusUpdateHandler)\r\n\u251c\u2500\u2500 Terrain                  (Terrain + TerrainHeightProvider)\r\n\u251c\u2500\u2500 PathfindingManager       (PathfindingManager)\r\n\u2514\u2500\u2500 Main Camera\n"})}),"\n",(0,t.jsx)(n.h2,{id:"complete-minimal-setup-code",children:"Complete Minimal Setup Code"}),"\n",(0,t.jsx)(n.p,{children:"If you prefer to set things up via code, here's how to initialize AirPath programmatically:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'using PlatypusIdeas.AirPath.Runtime.Core.Grid;\r\nusing PlatypusIdeas.AirPath.Runtime.Core.Pathfinding;\r\nusing PlatypusIdeas.AirPath.Runtime.Core.Terrain;\r\nusing UnityEngine;\r\n\r\npublic class MinimalAirPathSetup : MonoBehaviour\r\n{\r\n    [SerializeField] private TerrainHeightProvider heightProvider;\r\n    \r\n    private PathfindingService _pathfindingService;\r\n    \r\n    void Start()\r\n    {\r\n        // Create grid configuration\r\n        var config = new GridConfiguration(\r\n            width: heightProvider.GridWidth,\r\n            height: heightProvider.GridHeight,\r\n            cellSize: heightProvider.CellSize,\r\n            origin: heightProvider.Origin,\r\n            flyCostMultiplier: 2.5f\r\n        );\r\n        \r\n        // Initialize pathfinding service\r\n        _pathfindingService = gameObject.AddComponent<PathfindingService>();\r\n        _pathfindingService.Initialize(config, heightProvider);\r\n    }\r\n    \r\n    public void CalculateTestPath()\r\n    {\r\n        // Calculate a path from world positions\r\n        var path = _pathfindingService.CalculatePath(\r\n            worldStart: new Vector3(100, 0, 100),\r\n            worldEnd: new Vector3(400, 0, 400),\r\n            heightOffset: 10f  // Fly 10 units above terrain\r\n        );\r\n        \r\n        if (path != null)\r\n        {\r\n            Debug.Log($"Path found with {path.Count} waypoints!");\r\n            foreach (var point in path)\r\n            {\r\n                Debug.Log($"  \u2192 {point}");\r\n            }\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"about-the-terrain-setup",children:"About the Terrain Setup"}),"\n",(0,t.jsxs)(n.p,{children:["In the demo scene, you'll notice the Terrain GameObject has a ",(0,t.jsx)(n.strong,{children:"TerrainController"})," component attached. It's important to understand that this component is ",(0,t.jsx)(n.strong,{children:"not required"})," for AirPath to function."]}),"\n",(0,t.jsx)(n.h3,{id:"terraincontroller-demo-only",children:"TerrainController (Demo Only)"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"TerrainController"})," is our demo-specific implementation that provides:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Debug visualization (heatmap grid overlay)"}),"\n",(0,t.jsx)(n.li,{children:"Path cell coloring for visual feedback"}),"\n",(0,t.jsx)(n.li,{children:"Runtime grid visibility toggling"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["This component exists purely for demonstration and debugging purposes. ",(0,t.jsx)(n.strong,{children:"You are free to replace it with your own terrain management solution"})," or remove it entirely in production."]}),"\n",(0,t.jsx)("a",{href:i(2034).A,target:"_blank",children:(0,t.jsx)("img",{src:i(2034).A,alt:"Target Follow Inspector",width:"500"})}),"\n",(0,t.jsx)(n.h3,{id:"terrainheightprovider-required",children:"TerrainHeightProvider (Required)"}),"\n",(0,t.jsxs)(n.p,{children:["The only terrain-related component that AirPath actually requires is the ",(0,t.jsx)(n.strong,{children:"TerrainHeightProvider"}),". This component is responsible for supplying terrain height data to the pathfinding system."]}),"\n",(0,t.jsx)(n.admonition,{title:"Key Takeaway",type:"info",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"TerrainHeightProvider"})," = Required for pathfinding to work",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"TerrainController"})," = Optional demo helper for visualization"]})}),"\n",(0,t.jsxs)(n.p,{children:["If you're integrating AirPath into your own project and already have terrain management in place, you only need to ensure that a ",(0,t.jsx)(n.code,{children:"TerrainHeightProvider"})," is configured. The visualization features from ",(0,t.jsx)(n.code,{children:"TerrainController"})," can be useful during development but should typically be disabled or removed for release builds."]}),"\n",(0,t.jsx)(n.h2,{id:"whats-next",children:"What's Next?"}),"\n",(0,t.jsx)(n.p,{children:"You now have a working AirPath setup! Here's where to go from here:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"../core-concepts/architecture-overview",children:"Core Concepts"})})," \u2014 Understand how AirPath works"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"../advanced/swarm-integration",children:"Swarm Integration"})})," \u2014 Make agents follow the calculated paths"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting-quick-start",children:"Troubleshooting Quick Start"}),"\n",(0,t.jsx)(n.h3,{id:"pathfindingeventbus-instance-not-initialized",children:'"PathfindingEventBus instance not initialized"'}),"\n",(0,t.jsxs)(n.p,{children:["Make sure you have an ",(0,t.jsx)(n.code,{children:"EventBusUpdateHandler"})," component in your scene with the ",(0,t.jsx)(n.code,{children:"PathfindingEventBus"})," asset assigned."]}),"\n",(0,t.jsx)(n.h3,{id:"heightprovider-cannot-be-null",children:'"heightProvider cannot be null"'}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"PathfindingManager"})," needs a reference to a ",(0,t.jsx)(n.code,{children:"TerrainHeightProvider"}),". Make sure:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Your Terrain has the ",(0,t.jsx)(n.code,{children:"TerrainHeightProvider"})," component"]}),"\n",(0,t.jsxs)(n.li,{children:["You've assigned it to the PathfindingManager's ",(0,t.jsx)(n.strong,{children:"Height Provider"})," field"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"path-is-always-null",children:"Path is always null"}),"\n",(0,t.jsx)(n.p,{children:"Check that:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Your start and end positions are within the terrain bounds"}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"PathfindingConfiguration"})," asset is assigned to the height provider"]}),"\n",(0,t.jsx)(n.li,{children:'Console shows "Initialized with grid size..." on Play'}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"performance-is-slow",children:"Performance is slow"}),"\n",(0,t.jsx)(n.p,{children:"For the quick start, try reducing the grid resolution:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Select your ",(0,t.jsx)(n.code,{children:"PathfindingConfig"})," asset"]}),"\n",(0,t.jsxs)(n.li,{children:["Lower ",(0,t.jsx)(n.strong,{children:"Samples Per Dimension"})," to 32 (32\xd732 = 1,024 cells)"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"../advanced/performance-tuning",children:"Performance Tuning"})," for detailed optimization guidance."]})]})}function c(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>l});var r=i(6540);const t={},s=r.createContext(t);function a(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);